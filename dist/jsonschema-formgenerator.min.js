!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):window.JSONSchemaFormRenderer=e(jQuery)}(function(e){function t(t){return e.when.apply(e,t).then(function(){return e.makeArray(arguments).join("")})}function n(a,s,d){var h=a.pop(),f=h;isNaN(parseInt(h,10))||(f=a[a.length-1].slice(0,-1));var m=(a.length?a.join("-")+"-":"")+h,v=['<div class="schema-property schema-property-'+f+" schema-datatype-"+s.type+'" data-datatype="'+s.type+'">'],y=a.slice(0);"root"+(a.length?"["+a.join("][")+"]":"")+"["+h+"]";if(y.push(h),void 0===d&&void 0!==s["default"]&&(d=s["default"]),s.options&&s.options.renderer&&l(s.options.renderer))return v.push(c(s,y,d,m)),v.push("</div>"),t(v);switch(s.type){case void 0:case"object":v.push('<div class="fieldset">'),s.title&&v.push('<div class="legend">'+s.title+"</div>"),v.push(i(s,y,d)),v.push("</div>");break;case"number":case"integer":s.options&&"hidden"!==s.options.inputRenderer&&v.push(p(m,s.title?s.title:h)),v.push(u(s,y,d,m));break;case"boolean":v.push(r(s,y,d,m));break;case"array":s.items["enum"]?(s.items.title=s.title,v.push(n(y,s.items,d).then(function(t){var n=e(t);return n.find("select").prop("multiple","multiple"),n.html()}))):(v.push('<div class="fieldset">'),s.title&&v.push('<div class="legend">'+s.title+"</div>"),e.each(d||{},function(e,t){var i=y.slice(0);i.push(e),v.push(n(i,s.items,t))}),v.push("</div>"));break;case"string":var b=void 0!==s["enum"];(b||s.options&&"hidden"!==s.options.inputRenderer)&&v.push(p(m,s.title?s.title:h,!b&&s.minLength)),v.push(o(s,y,d,m));break;default:throw new Error('Schema item "'+a.join(".")+'" is not valid')}return v.push("</div>"),t(v)}function i(r,u,o){var a=[];return o=o||{},void 0===r.properties?r.allOf?(e.each(r.allOf,function(e,t){a.push(i(t,u,o))}),t(a)):r.oneOf?(e.each(r.oneOf,function(e,t){a.push(i(t,u,o))}),t(a)):t(a):(e.each(r.properties,function(e,t){u.slice(0),u.push(e),a.push(n(u,t,o[e]))}),t(a).then(function(t){if(r.required){var n=e("<p>").html(t);return e.each(r.required,function(e,t){n.find(["input","textarea","select"].map(function(e){return".schema-property-"+t+" > "+e}).join(",")).attr("required","required")}),n.html()}return t}))}function r(e,t,n,i){return'<input type="checkbox" name="'+name+'" id="'+i+'" value="1"'+(n?' checked="checked"':"")+' /><label for="'+i+'">'+e.title+"</label>"}function u(e,t,n,i){return"undefined"!=typeof e["enum"]?a(e,t,n,i):s(e,t,n,i)}function o(e,t,n,i){return"undefined"!=typeof e["enum"]?a(e,t,n,i):s(e,t,n,i)}function a(t,n,i){var r=[],u=n.join("-"),o="root["+n.join("][")+"]";void 0===i&&void 0!==t["default"]&&(i=t["default"]);var a=t.options&&t.options.enum_titles?t.options.enum_titles:{},p=t.options&&t.options.inputRenderer?t.options.inputRenderer:null;if(f(p))return m(p,t,n,a[i],u);var s=t.options&&t.options.multiple===!0,d=t.options&&t.options.readOnly===!0;switch(t.inputType){case"radio":r.push('<div class="radiogroup">'),e.each(t["enum"],function(e,t){var n=u+"-"+t;r.push("<div>"),r.push('<input type="radio" name="'+o+'" value="'+t+'" id="'+n+'"'+(t===i?' checked="checked"':"")+'><label for="'+n+'">'+(a[e]||t)+"</label>"),r.push("</div>")}),r.push("</div>");break;default:r.push('<select name="'+o+'" id="'+u+'"'+(d?' readonly="readonly"':"")+(s?' multiple="multiple"':"")+">"),e.each(t["enum"],function(e,t){r.push('<option value="'+t+'"'+(t===i?' selected="selected"':"")+">"+(a[e]||t)+"</option>")}),r.push("</select>")}return r.join("")}function p(e,t,n){return'<label for="'+e+'">'+t+(n?" *":"")+"</label>"}function s(e,t,n,i){var r=e.options.inputRenderer||e.format||"text";if(f(r))return m(r,e,t,n,i);var u=e.name,o=e.description,a=e.options&&1==e.options.readOnly;return"textarea"===r?'<textarea type="text"'+(i?' id="'+i+'"':"")+(u?' name="'+u+'"':"")+(o?' placeholder="'+o+'"':"")+(a?' readonly="true"':"")+">"+(n||"")+"</textarea>":"<input "+(r?' type="'+r+'"':"")+(i?' id="'+i+'"':"")+(u?' name="'+u+'"':"")+(n?' value="'+n+'"':"")+(o?' placeholder="'+o+'"':"")+(a?' readonly="true"':"")+"/>"}function d(e,t){v[e]=t}function l(e){return"undefined"!=typeof v[e]}function c(){var e=[].shift.call(arguments);return v[e].apply(arguments)}function h(e,t){y[e]=t}function f(e){return"undefined"!=typeof y[e]}function m(){var e=[].shift.call(arguments);return y[e]?y[e].apply(arguments):""}var v={},y={};return e.fn.appendSchema=function(t,n){i(t,[],n).then(function(t){e(this).append(t)})},{render:i,renderChunk:n,addRenderer:d,addInputRenderer:h}});
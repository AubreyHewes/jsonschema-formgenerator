!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):window.JSONSchemaFormRenderer=e(jQuery)}(function(e){function t(t){return e.when.apply(e,t).then(function(){return e.makeArray(arguments).join("")})}function n(o,s,d){var h=o.pop(),f=h;isNaN(parseInt(h,10))||(f=o[o.length-1].slice(0,-1));var m=(o.length?o.join("-")+"-":"")+h,v=['<div class="schema-property schema-property-'+f+" schema-datatype-"+s.type+'" data-datatype="'+s.type+'">'],y=o.slice(0),g="root"+(o.length?"["+o.join("][")+"]":"")+"["+h+"]";if(y.push(h),void 0===d&&void 0!==s["default"]&&(d=s["default"]),s.options&&s.options.renderer&&l(s.options.renderer))return v.push(c(s.options.renderer,s,y,m,g,d)),v.push("</div>"),t(v);switch(s.type){case void 0:case"object":v.push('<div class="fieldset">'),s.title&&v.push('<div class="legend">'+s.title+"</div>"),v.push(i(s,y,d)),v.push("</div>");break;case"number":case"integer":s.options&&"hidden"===s.options.inputRenderer||v.push(p(m,s.title?s.title:h)),v.push(u(s,y,m,g,d));break;case"boolean":v.push(r(s,y,m,g,d));break;case"array":s.items["enum"]?(s.items.title=s.title,v.push(n(y,s.items,d).then(function(t){var n=e(t);return n.find("select").prop("multiple","multiple").each(function(){var t=e(this);t.attr("name",t.attr("name")+"[]").find("option").each(function(){var t=e(this);d&&-1!==d.indexOf(t.val())&&t.attr("selected","selected")})}),n.html()}))):(v.push('<div class="fieldset">'),s.title&&v.push('<div class="legend">'+s.title+"</div>"),e.each(d||{},function(e,t){var i=y.slice(0);i.push(e),v.push(n(i,s.items,t))}),v.push("</div>"));break;case"string":var x=void 0!==s["enum"];(x||!s.options||"hidden"!==s.options.inputRenderer)&&v.push(p(m,s.title?s.title:h,!x&&s.minLength)),v.push(a(s,y,m,g,d));break;default:throw new Error('Schema item "'+o.join(".")+'" is not valid')}return v.push("</div>"),t(v)}function i(r,u,a){var o=[];return a=a||{},void 0===r.properties?r.allOf?(e.each(r.allOf,function(e,t){o.push(i(t,u,a))}),t(o)):r.oneOf?(e.each(r.oneOf,function(e,t){o.push(i(t,u,a))}),t(o)):t(o):(e.each(r.properties,function(e,t){u.slice(0),u.push(e),o.push(n(u,t,a[e]))}),t(o).then(function(t){if(r.required){var n=e("<p>").html(t);return e.each(r.required,function(e,t){n.find(["input","textarea","select"].map(function(e){return".schema-property-"+t+" > "+e}).join(",")).attr("required","required")}),n.html()}return t}))}function r(e,t,n,i,r){return'<input type="checkbox" name="'+i+'" id="'+n+'" value="1"'+(r?' checked="checked"':"")+' /><label for="'+n+'">'+e.title+"</label>"}function u(e,t,n,i,r){return"undefined"!=typeof e["enum"]?o(e,t,n,i,r):(e.format="number",s(e,t,n,i,r))}function a(e,t,n,i,r){return"undefined"!=typeof e["enum"]?o(e,t,n,i,r):s(e,t,n,i,r)}function o(t,n,i,r,u){var a=[];void 0===u&&void 0!==t["default"]&&(u=t["default"]);var o=t.options&&t.options.enum_titles?t.options.enum_titles:{},p=t.options&&t.options.inputRenderer?t.options.inputRenderer:null;if(f(p))return m(p,t,n,i,r,u);var s=t.options&&t.options.multiple===!0,d=t.options&&t.options.readOnly===!0;switch(t.inputType){case"radio":a.push('<div class="radiogroup">'),e.each(t["enum"],function(e,t){var n=i+"-"+t;a.push("<div>"),a.push('<input type="radio" name="'+r+'" value="'+t+'" id="'+n+'"'+(t===u?' checked="checked"':"")+'><label for="'+n+'">'+(o[e]||t)+"</label>"),a.push("</div>")}),a.push("</div>");break;default:a.push('<select name="'+r+'" id="'+i+'"'+(d?' readonly="readonly"':"")+(s?' multiple="multiple"':"")+">"),e.each(t["enum"],function(e,t){a.push('<option value="'+t+'"'+(t===u?' selected="selected"':"")+">"+(o[e]||t)+"</option>")}),a.push("</select>")}return a.join("")}function p(e,t,n){return'<label for="'+e+'">'+t+(n?" *":"")+"</label>"}function s(e,t,n,i,r){var u=e.format||"text";if(e.options&&e.options.inputRenderer&&(u=e.options.inputRenderer),f(u))return m(u,e,t,n,i,r);var a=e.description,o=e.options&&1==e.options.readOnly;return"textarea"===u?'<textarea type="text"'+(n?' id="'+n+'"':"")+(i?' name="'+i+'"':"")+(e.minLength?' minlength="'+e.minLength+'"':"")+(e.maxLength?' maxlength="'+e.maxLength+'"':"")+(a?' placeholder="'+a+'"':"")+(o?' readonly="true"':"")+">"+(r||"")+"</textarea>":"<input "+(u?' type="'+u+'"':"")+(n?' id="'+n+'"':"")+(i?' name="'+i+'"':"")+(e.pattern?' pattern="'+e.pattern+'"':"")+(e.minLength?' minlength="'+e.minLength+'"':"")+(e.maxLength?' maxlength="'+e.maxLength+'"':"")+(e.min?' min="'+e.min+'"':"")+(e.max?' max="'+e.max+'"':"")+(r?' value="'+r+'"':"")+(a?' placeholder="'+a+'"':"")+(o?' readonly="true"':"")+"/>"}function d(e,t){v[e]=t}function l(e){return"undefined"!=typeof v[e]}function c(){var e=[].shift.call(arguments);return v[e]?v[e].apply(this,arguments):""}function h(e,t){y[e]=t}function f(e){return"undefined"!=typeof y[e]}function m(){var e=[].shift.call(arguments);return y[e]?y[e].apply(this,arguments):""}var v={},y={};return e.fn.appendSchema=function(t,n){i(t,[],n).then(function(t){e(this).append(t)})},{render:i,renderChunk:n,addRenderer:d,addInputRenderer:h}});
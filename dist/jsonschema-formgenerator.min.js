!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):window.JSONSchemaFormRenderer=e(jQuery)}(function(e){function t(t){return e.when.apply(e,t).then(function(){return e.makeArray(arguments).join("")})}function n(a,s,d){var h=a.pop(),f=h;isNaN(parseInt(h,10))||(f=a[a.length-1].slice(0,-1));var m=(a.length?a.join("-")+"-":"")+h,v=['<div class="schema-property schema-property-'+f+" schema-datatype-"+s.type+'" data-datatype="'+s.type+'">'],y=a.slice(0),g="root"+(a.length?"["+a.join("][")+"]":"")+"["+h+"]";if(y.push(h),void 0===d&&void 0!==s["default"]&&(d=s["default"]),s.options&&s.options.renderer&&l(s.options.renderer))return v.push(c(s.options.renderer,s,y,m,g,d)),v.push("</div>"),t(v);switch(s.type){case void 0:case"object":v.push('<div class="fieldset">'),s.title&&v.push('<div class="legend">'+s.title+"</div>"),v.push(i(s,y,d)),v.push("</div>");break;case"number":case"integer":s.options&&"hidden"===s.options.inputRenderer||v.push(p(m,s.title?s.title:h)),v.push(u(s,y,m,g,d));break;case"boolean":v.push(r(s,y,m,g,d));break;case"array":s.items["enum"]?(s.items.title=s.title,v.push(n(y,s.items,d).then(function(t){var n=e(t);return n.find("select").prop("multiple","multiple"),n.html()}))):(v.push('<div class="fieldset">'),s.title&&v.push('<div class="legend">'+s.title+"</div>"),e.each(d||{},function(e,t){var i=y.slice(0);i.push(e),v.push(n(i,s.items,t))}),v.push("</div>"));break;case"string":var b=void 0!==s["enum"];(b||!s.options||"hidden"!==s.options.inputRenderer)&&v.push(p(m,s.title?s.title:h,!b&&s.minLength)),v.push(o(s,y,m,g,d));break;default:throw new Error('Schema item "'+a.join(".")+'" is not valid')}return v.push("</div>"),t(v)}function i(r,u,o){var a=[];return o=o||{},void 0===r.properties?r.allOf?(e.each(r.allOf,function(e,t){a.push(i(t,u,o))}),t(a)):r.oneOf?(e.each(r.oneOf,function(e,t){a.push(i(t,u,o))}),t(a)):t(a):(e.each(r.properties,function(e,t){u.slice(0),u.push(e),a.push(n(u,t,o[e]))}),t(a).then(function(t){if(r.required){var n=e("<p>").html(t);return e.each(r.required,function(e,t){n.find(["input","textarea","select"].map(function(e){return".schema-property-"+t+" > "+e}).join(",")).attr("required","required")}),n.html()}return t}))}function r(e,t,n,i,r){return'<input type="checkbox" name="'+i+'" id="'+n+'" value="1"'+(r?' checked="checked"':"")+' /><label for="'+n+'">'+e.title+"</label>"}function u(e,t,n,i,r){return"undefined"!=typeof e["enum"]?a(e,t,n,i,r):s(e,t,n,i,r)}function o(e,t,n,i,r){return"undefined"!=typeof e["enum"]?a(e,t,n,i,r):s(e,t,n,i,r)}function a(t,n,i,r,u){var o=[];void 0===u&&void 0!==t["default"]&&(u=t["default"]);var a=t.options&&t.options.enum_titles?t.options.enum_titles:{},p=t.options&&t.options.inputRenderer?t.options.inputRenderer:null;if(f(p))return m(p,t,n,i,r,u);var s=t.options&&t.options.multiple===!0,d=t.options&&t.options.readOnly===!0;switch(t.inputType){case"radio":o.push('<div class="radiogroup">'),e.each(t["enum"],function(e,t){var n=i+"-"+t;o.push("<div>"),o.push('<input type="radio" name="'+r+'" value="'+t+'" id="'+n+'"'+(t===u?' checked="checked"':"")+'><label for="'+n+'">'+(a[e]||t)+"</label>"),o.push("</div>")}),o.push("</div>");break;default:o.push('<select name="'+r+'" id="'+i+'"'+(d?' readonly="readonly"':"")+(s?' multiple="multiple"':"")+">"),e.each(t["enum"],function(e,t){o.push('<option value="'+t+'"'+(t===u?' selected="selected"':"")+">"+(a[e]||t)+"</option>")}),o.push("</select>")}return o.join("")}function p(e,t,n){return'<label for="'+e+'">'+t+(n?" *":"")+"</label>"}function s(e,t,n,i,r){var u=e.format||"text";if(e.options&&e.options.inputRenderer&&(u=e.options.inputRenderer),f(u))return m(u,e,t,n,i,r);var o=e.description,a=e.options&&1==e.options.readOnly;return"textarea"===u?'<textarea type="text"'+(n?' id="'+n+'"':"")+(i?' name="'+i+'"':"")+(e.minLength?' minlength="'+e.minLength+'"':"")+(e.maxLength?' maxlength="'+e.maxLength+'"':"")+(o?' placeholder="'+o+'"':"")+(a?' readonly="true"':"")+">"+(r||"")+"</textarea>":"<input "+(u?' type="'+u+'"':"")+(n?' id="'+n+'"':"")+(i?' name="'+i+'"':"")+(e.pattern?' pattern="'+e.pattern+'"':"")+(e.minLength?' minlength="'+e.minLength+'"':"")+(e.maxLength?' maxlength="'+e.maxLength+'"':"")+(r?' value="'+r+'"':"")+(o?' placeholder="'+o+'"':"")+(a?' readonly="true"':"")+"/>"}function d(e,t){v[e]=t}function l(e){return"undefined"!=typeof v[e]}function c(){var e=[].shift.call(arguments);return v[e]?v[e].apply(this,arguments):""}function h(e,t){y[e]=t}function f(e){return"undefined"!=typeof y[e]}function m(){var e=[].shift.call(arguments);return y[e]?y[e].apply(this,arguments):""}var v={},y={};return e.fn.appendSchema=function(t,n){i(t,[],n).then(function(t){e(this).append(t)})},{render:i,renderChunk:n,addRenderer:d,addInputRenderer:h}});
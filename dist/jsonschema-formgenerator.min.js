!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):window.JSONSchemaFormRenderer=e(jQuery)}(function(e){function n(n){return e.when.apply(e,n).then(function(){return e.makeArray(arguments).join("")})}function t(a,s,d){var h=a.pop(),f=h;isNaN(parseInt(h,10))||(f=a[a.length-1].slice(0,-1));var m=(a.length?a.join("-")+"-":"")+h,v=['<div class="schema-property schema-property-'+f+" schema-datatype-"+s.type+'" data-datatype="'+s.type+'">'],y=a.slice(0);"root"+(a.length?"["+a.join("][")+"]":"")+"["+h+"]";if(y.push(h),void 0===d&&void 0!==s["default"]&&(d=s["default"]),s.options&&s.options.renderer&&l(s.options.renderer))return v.push(c(s.options.renderer,s,y,d,m)),v.push("</div>"),n(v);switch(s.type){case void 0:case"object":v.push('<div class="fieldset">'),s.title&&v.push('<div class="legend">'+s.title+"</div>"),v.push(i(s,y,d)),v.push("</div>");break;case"number":case"integer":s.options&&"hidden"===s.options.inputRenderer||v.push(p(m,s.title?s.title:h)),v.push(o(s,y,d,m));break;case"boolean":v.push(r(s,y,d,m));break;case"array":s.items["enum"]?(s.items.title=s.title,v.push(t(y,s.items,d).then(function(n){var t=e(n);return t.find("select").prop("multiple","multiple"),t.html()}))):(v.push('<div class="fieldset">'),s.title&&v.push('<div class="legend">'+s.title+"</div>"),e.each(d||{},function(e,n){var i=y.slice(0);i.push(e),v.push(t(i,s.items,n))}),v.push("</div>"));break;case"string":var g=void 0!==s["enum"];(g||!s.options||"hidden"!==s.options.inputRenderer)&&v.push(p(m,s.title?s.title:h,!g&&s.minLength)),v.push(u(s,y,d,m));break;default:throw new Error('Schema item "'+a.join(".")+'" is not valid')}return v.push("</div>"),n(v)}function i(r,o,u){var a=[];return u=u||{},void 0===r.properties?r.allOf?(e.each(r.allOf,function(e,n){a.push(i(n,o,u))}),n(a)):r.oneOf?(e.each(r.oneOf,function(e,n){a.push(i(n,o,u))}),n(a)):n(a):(e.each(r.properties,function(e,n){o.slice(0),o.push(e),a.push(t(o,n,u[e]))}),n(a).then(function(n){if(r.required){var t=e("<p>").html(n);return e.each(r.required,function(e,n){t.find(["input","textarea","select"].map(function(e){return".schema-property-"+n+" > "+e}).join(",")).attr("required","required")}),t.html()}return n}))}function r(e,n,t,i){return'<input type="checkbox" name="'+name+'" id="'+i+'" value="1"'+(t?' checked="checked"':"")+' /><label for="'+i+'">'+e.title+"</label>"}function o(e,n,t,i){return"undefined"!=typeof e["enum"]?a(e,n,t,i):s(e,n,t,i)}function u(e,n,t,i){return"undefined"!=typeof e["enum"]?a(e,n,t,i):s(e,n,t,i)}function a(n,t,i){var r=[],o=t.join("-"),u="root["+t.join("][")+"]";void 0===i&&void 0!==n["default"]&&(i=n["default"]);var a=n.options&&n.options.enum_titles?n.options.enum_titles:{},p=n.options&&n.options.inputRenderer?n.options.inputRenderer:null;if(f(p))return m(p,n,t,i,o);var s=n.options&&n.options.multiple===!0,d=n.options&&n.options.readOnly===!0;switch(n.inputType){case"radio":r.push('<div class="radiogroup">'),e.each(n["enum"],function(e,n){var t=o+"-"+n;r.push("<div>"),r.push('<input type="radio" name="'+u+'" value="'+n+'" id="'+t+'"'+(n===i?' checked="checked"':"")+'><label for="'+t+'">'+(a[e]||n)+"</label>"),r.push("</div>")}),r.push("</div>");break;default:r.push('<select name="'+u+'" id="'+o+'"'+(d?' readonly="readonly"':"")+(s?' multiple="multiple"':"")+">"),e.each(n["enum"],function(e,n){r.push('<option value="'+n+'"'+(n===i?' selected="selected"':"")+">"+(a[e]||n)+"</option>")}),r.push("</select>")}return r.join("")}function p(e,n,t){return'<label for="'+e+'">'+n+(t?" *":"")+"</label>"}function s(e,n,t,i){var r=e.format||"text";if(e.options&&e.options.inputRenderer&&(r=e.options.inputRenderer),f(r))return m(r,e,n,t,i);var o=e.name,u=e.description,a=e.options&&1==e.options.readOnly;return"textarea"===r?'<textarea type="text"'+(i?' id="'+i+'"':"")+(o?' name="'+o+'"':"")+(e.minLength?' minlength="'+e.minLength+'"':"")+(e.maxLength?' maxlength="'+e.maxLength+'"':"")+(u?' placeholder="'+u+'"':"")+(a?' readonly="true"':"")+">"+(t||"")+"</textarea>":"<input "+(r?' type="'+r+'"':"")+(i?' id="'+i+'"':"")+(o?' name="'+o+'"':"")+(e.pattern?' pattern="'+e.pattern+'"':"")+(e.minLength?' minlength="'+e.minLength+'"':"")+(e.maxLength?' maxlength="'+e.maxLength+'"':"")+(t?' value="'+t+'"':"")+(u?' placeholder="'+u+'"':"")+(a?' readonly="true"':"")+"/>"}function d(e,n){v[e]=n}function l(e){return"undefined"!=typeof v[e]}function c(){var e=[].shift.call(arguments);return v[e]?v[e].apply(this,arguments):""}function h(e,n){y[e]=n}function f(e){return"undefined"!=typeof y[e]}function m(){var e=[].shift.call(arguments);return y[e]?y[e].apply(this,arguments):""}var v={},y={};return e.fn.appendSchema=function(n,t){i(n,[],t).then(function(n){e(this).append(n)})},{render:i,renderChunk:t,addRenderer:d,addInputRenderer:h}});